<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Plot model predictions vs observed outcomes — plot.predicted_df • healthcareai</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>


<meta property="og:title" content="Plot model predictions vs observed outcomes — plot.predicted_df" />

<meta property="og:description" content="Plot model predictions vs observed outcomes" />

<meta property="og:image" content="https://docs.healthcare.ai/logo.png" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-85609357-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-85609357-1');
</script>

  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">healthcareai</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">2.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/site_only/healthcareai.html">Getting Started</a>
    </li>
    <li>
      <a href="../articles/site_only/db_connections.html">Database Connections</a>
    </li>
    <li>
      <a href="../articles/site_only/deploy_model.html">Deploying a Model</a>
    </li>
    <li>
      <a href="../articles/site_only/best_levels.html">Variables with Many Categories</a>
    </li>
    <li>
      <a href="../articles/site_only/performance.html">Performance with Big Data</a>
    </li>
    <li>
      <a href="../articles/site_only/transitioning.html">Transition from Version 1</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/HealthCatalyst/healthcareai-r">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://healthcare-ai.slack.com/">
    <span class="fa fa-users"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Plot model predictions vs observed outcomes</h1>
    
    <div class="hidden name"><code>plot.predicted_df.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Plot model predictions vs observed outcomes</p>
    
    </div>

    <pre class="usage"><span class='co'># S3 method for predicted_df</span>
<span class='fu'>plot</span>(<span class='no'>x</span>, <span class='kw'>caption</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>title</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>font_size</span> <span class='kw'>=</span> <span class='fl'>11</span>, <span class='kw'>outcomes</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>fixed_aspect</span> <span class='kw'>=</span> <span class='fu'>attr</span>(<span class='no'>x</span>,
  <span class='st'>"model_info"</span>)$<span class='no'>type</span> <span class='kw'>==</span> <span class='st'>"Regression"</span>, <span class='kw'>print</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)

<span class='fu'>plot_regression_predictions</span>(<span class='no'>x</span>, <span class='kw'>point_size</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>point_alpha</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='no'>target</span>)

<span class='fu'>plot_classification_predictions</span>(<span class='no'>x</span>, <span class='kw'>fill_colors</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"firebrick"</span>, <span class='st'>"steelblue"</span>),
  <span class='kw'>fill_alpha</span> <span class='kw'>=</span> <span class='fl'>0.7</span>, <span class='kw'>curve_flex</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>add_labels</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>target</span>)

<span class='fu'>plot_multiclass_predictions</span>(<span class='no'>x</span>, <span class='kw'>conf_colors</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"black"</span>, <span class='st'>"steelblue"</span>),
  <span class='kw'>text_color</span> <span class='kw'>=</span> <span class='st'>"yellow"</span>, <span class='kw'>diag_color</span> <span class='kw'>=</span> <span class='st'>"red"</span>, <span class='no'>target</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>data frame as returned `predict.model_list`</p></td>
    </tr>
    <tr>
      <th>caption</th>
      <td><p>Put model performance in plot caption? TRUE (default) prints
all available metrics, FALSE prints nothing. Can also provide metric name
(e.g. "RMSE"), in which case the caption will include only that metric.</p></td>
    </tr>
    <tr>
      <th>title</th>
      <td><p>Character: Plot title, default NULL produces no title.</p></td>
    </tr>
    <tr>
      <th>font_size</th>
      <td><p>Number: Relative size of all font in plot, default = 11</p></td>
    </tr>
    <tr>
      <th>outcomes</th>
      <td><p>Vector of outcomes if not present in x</p></td>
    </tr>
    <tr>
      <th>fixed_aspect</th>
      <td><p>Logical: If TRUE (default for regression only), units of
the x- and y-axis will have the same spacing.</p></td>
    </tr>
    <tr>
      <th>print</th>
      <td><p>Logical, if TRUE (default) the plot is printed on the current
graphics device. The plot is always (silently) returned.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Parameters specific to plot_regression_predictions or
plot_classification_predictions; listed below. These must be named.</p></td>
    </tr>
    <tr>
      <th>point_size</th>
      <td><p>Number: Point size, relative to 1</p></td>
    </tr>
    <tr>
      <th>point_alpha</th>
      <td><p>Number in [0, 1] giving point opacity</p></td>
    </tr>
    <tr>
      <th>target</th>
      <td><p>Not meant to be set by user. outcome column name</p></td>
    </tr>
    <tr>
      <th>fill_colors</th>
      <td><p>Length-2 character vector: colors to fill density curves.
Default is c("firebrick", "steelblue"). If named, names must match
<code>unique(x[[target]])</code>, in any order.</p></td>
    </tr>
    <tr>
      <th>fill_alpha</th>
      <td><p>Number in [0, 1] giving opacity of fill colors.</p></td>
    </tr>
    <tr>
      <th>curve_flex</th>
      <td><p>Numeric. Kernal adjustment for density curves. Default is
1. Less than 1 makes curves more flexible, analogous to smaller bins in a
histogram; greater than 1 makes curves more rigid.</p></td>
    </tr>
    <tr>
      <th>add_labels</th>
      <td><p>If TRUE (default) and a predicted_group column was added to
predictions by specifying <code>risk_groups</code> or <code>outcome_groups</code> in
<code>link{predict.model_list}</code>, labels specifying groups are added to the
plot.</p></td>
    </tr>
    <tr>
      <th>conf_colors</th>
      <td><p>Length-2 character vector: colors to fill density curves.
Default is c("black", "steelblue").</p></td>
    </tr>
    <tr>
      <th>text_color</th>
      <td><p>Character: color to write percent correct.
Default is "yellow".</p></td>
    </tr>
    <tr>
      <th>diag_color</th>
      <td><p>Character: color to highlight main diagonal. These are
correct predictions. Default is "red".</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A ggplot object</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Note that a ggplot object is returned, so you can do additional
  customization of the plot. See the third example.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Some regression examples</span>
<span class='no'>models</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='machine_learn.html'>machine_learn</a></span>(<span class='no'>pima_diabetes</span>[<span class='fl'>1</span>:<span class='fl'>50</span>, ], <span class='no'>patient_id</span>, <span class='kw'>outcome</span> <span class='kw'>=</span> <span class='no'>plasma_glucose</span>,
                        <span class='kw'>models</span> <span class='kw'>=</span> <span class='st'>"rf"</span>, <span class='kw'>tune</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt; <span class='message'>Training new data prep recipe...</span></div><div class='output co'>#&gt; <span class='message'>Variable(s) ignored in prep_data won't be used to tune models: patient_id</span></div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>plasma_glucose looks numeric, so training regression algorithms.</span></div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>After data processing, models are being trained on 14 features with 50 observations.</span>
#&gt; <span class='message'>Based on n_folds = 5 and hyperparameter settings, the following number of models will be trained: 5 rf's </span></div><div class='output co'>#&gt; <span class='message'>Training at fixed values: Random Forest</span></div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>*** Models successfully trained. The model object contains the training data minus ignored ID columns. ***</span>
#&gt; <span class='message'>*** If there was PHI in training data, normal PHI protocols apply to the model object. ***</span></div><div class='input'><span class='no'>predictions</span> <span class='kw'>&lt;-</span> <span class='fu'>predict</span>(<span class='no'>models</span>)
<span class='fu'>plot</span>(<span class='no'>predictions</span>)</div><div class='img'><img src='plot.predicted_df-1.png' alt='' width='576' height='288' /></div><div class='input'><span class='fu'>plot</span>(<span class='no'>predictions</span>, <span class='kw'>caption</span> <span class='kw'>=</span> <span class='st'>"Rsquared"</span>,
     <span class='kw'>title</span> <span class='kw'>=</span> <span class='st'>"This model's predictions regress to the mean"</span>,
     <span class='kw'>point_size</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>point_alpha</span> <span class='kw'>=</span> <span class='fl'>.7</span>, <span class='kw'>font_size</span> <span class='kw'>=</span> <span class='fl'>14</span>)</div><div class='img'><img src='plot.predicted_df-2.png' alt='' width='576' height='288' /></div><div class='input'><span class='no'>p</span> <span class='kw'>&lt;-</span> <span class='fu'>plot</span>(<span class='no'>predictions</span>, <span class='kw'>print</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
<span class='no'>p</span> + <span class='fu'>theme_classic</span>()</div><div class='img'><img src='plot.predicted_df-3.png' alt='' width='576' height='288' /></div><div class='input'>
<span class='co'># A classification example with risk groups</span>
<span class='no'>class_models</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='machine_learn.html'>machine_learn</a></span>(<span class='no'>pima_diabetes</span>, <span class='no'>patient_id</span>, <span class='kw'>outcome</span> <span class='kw'>=</span> <span class='no'>diabetes</span>,
                              <span class='kw'>models</span> <span class='kw'>=</span> <span class='st'>"xgb"</span>, <span class='kw'>tune</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt; <span class='message'>Training new data prep recipe...</span></div><div class='output co'>#&gt; <span class='message'>Variable(s) ignored in prep_data won't be used to tune models: patient_id</span></div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>diabetes looks categorical, so training classification algorithms.</span></div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>After data processing, models are being trained on 12 features with 768 observations.</span>
#&gt; <span class='message'>Based on n_folds = 5 and hyperparameter settings, the following number of models will be trained: 5 xgb's </span></div><div class='output co'>#&gt; <span class='message'>Training at fixed values: eXtreme Gradient Boosting</span></div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>*** Models successfully trained. The model object contains the training data minus ignored ID columns. ***</span>
#&gt; <span class='message'>*** If there was PHI in training data, normal PHI protocols apply to the model object. ***</span></div><div class='input'><span class='fu'>predict</span>(<span class='no'>class_models</span>,
        <span class='kw'>risk_groups</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"v low"</span>, <span class='st'>"low"</span>, <span class='st'>"medium"</span>, <span class='st'>"high"</span>, <span class='st'>"very high"</span>)) <span class='kw'>%&gt;%</span>
  <span class='fu'>plot</span>()</div><div class='img'><img src='plot.predicted_df-4.png' alt='' width='576' height='288' /></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Levi Thatcher, Michael Levy, Mike Mastanduno, Taylor Larsen, Taylor Miller.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script>
  docsearch({
    
    
    apiKey: 'ac39465bc37cbef616f5de1e646b6037',
    indexName: 'healthcareai',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>


  </body>
</html>

